<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flask Web Timer</title>
    <style>
        body { font-family: Arial; text-align: center; margin-top: 50px; }
        .timer { font-size: 48px; margin: 20px 0; }
        input { padding: 5px 10px; font-size: 16px; }
        button { padding: 10px 18px; margin: 5px; font-size: 16px; }
        hr { margin: 40px; }
    </style>
</head>
<body>

    <h1>⏱ 網頁計時器</h1>

    <!-- 正計時區 -->
    <h2>Stopwatch（正計時）</h2>
    <div id="stopwatch" class="timer">00:00:00</div>

    <button onclick="startStopwatch()">開始</button>
    <button onclick="stopStopwatch()">停止</button>
    <button onclick="resetStopwatch()">重設</button>

    <hr>

    <!-- 倒計時計 -->
    <h2>Countdown（倒計時）</h2>

    <input type="number" id="countInput" placeholder="輸入秒數">
    <div id="countdown" class="timer">00:00</div>

    <button onclick="startCountdown()">開始倒計時</button>
    <button onclick="stopCountdown()">停止</button>
    <button onclick="resetCountdown()">重設</button>

<script>
// ------------------ 正計時 ------------------
let swInterval;
let swSeconds = 0;

function formatTime(sec){
    let h = Math.floor(sec / 3600);
    let m = Math.floor((sec % 3600) / 60);
    let s = sec % 60;
    return (
        String(h).padStart(2, "0") + ":" +
        String(m).padStart(2, "0") + ":" +
        String(s).padStart(2, "0")
    );
}

function startStopwatch(){
    if (swInterval) return;
    swInterval = setInterval(() => {
        swSeconds++;
        document.getElementById("stopwatch").textContent = formatTime(swSeconds);
    }, 1000);
}

function stopStopwatch(){
    clearInterval(swInterval);
    swInterval = null;
}

function resetStopwatch(){
    stopStopwatch();
    swSeconds = 0;
    document.getElementById("stopwatch").textContent = "00:00:00";
}


// ------------------ 倒計時 ------------------
let cdInterval;
let cdSeconds = 0;

function startCountdown(){
    let input = parseInt(document.getElementById("countInput").value);
    if (!input || input <= 0) {
        alert("請輸入正確秒數");
        return;
    }
    cdSeconds = input;

    if (cdInterval) return;

    cdInterval = setInterval(() => {
        if (cdSeconds <= 0){
            clearInterval(cdInterval);
            cdInterval = null;
            alert("倒計時結束!");
        } else {
            cdSeconds--;
        }
        document.getElementById("countdown").textContent =
            String(Math.floor(cdSeconds / 60)).padStart(2,"0") + ":" +
            String(cdSeconds % 60).padStart(2,"0");
    }, 1000);
}

function stopCountdown(){
    clearInterval(cdInterval);
    cdInterval = null;
}

function resetCountdown(){
    stopCountdown();
    cdSeconds = 0;
    document.getElementById("countdown").textContent = "00:00";
}
</script>

</body>
</html>
